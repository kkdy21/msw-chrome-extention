window.addEventListener("mswStateChanged",()=>{console.log("ContentScript: 'mswStateChanged' 이벤트 감지. 패널에 알림."),chrome.runtime.sendMessage({type:"STATE_CHANGED_NOTIFICATION"})});chrome.runtime.onMessage.addListener((t,a,e)=>{if(typeof window.mswControl>"u")return e({error:"window에서 mswControl을 사용할 수 없습니다."}),!0;switch(t.type){case"GET_STATE":console.log("ContentScript: 패널로부터 GET_STATE 요청 수신.");const o=window.mswControl.getHandlers();e({type:"STATE_UPDATE",payload:o});break;case"TOGGLE_HANDLER":console.log("ContentScript: TOGGLE_HANDLER 명령 수신.",t.payload);const{id:n,enabled:r}=t.payload;r?window.mswControl.enableHandler(n).then(()=>e({success:!0})):window.mswControl.disableHandler(n).then(()=>e({success:!0}));break;default:e({error:"알 수 없는 요청 유형입니다."});break}return!0});
